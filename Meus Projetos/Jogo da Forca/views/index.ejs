<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Jogo da Forca</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <div class="container">
            <div class="palavraEscolhida">
                <h1>Adivinhe a Palavra:</h1>
                <h3 class="palavraEscondida"><%=palavra %></h3>
                <h2></h2>
                <h4><%= dica %></h4>
            </div>
            <div class="alfabeto">
                <p class="pSemClique">a</p>
                <p class="pSemClique">b</p>
                <p class="pSemClique">c</p>
                <p class="pSemClique">d</p>
                <p class="pSemClique">e</p>
                <p class="pSemClique">f</p>
                <p class="pSemClique">g</p>
                <p class="pSemClique">h</p>
                <p class="pSemClique">i</p>
                <p class="pSemClique">j</p>
                <p class="pSemClique">k</p>
                <p class="pSemClique">l</p>
                <p class="pSemClique">m</p>
                <p class="pSemClique">n</p>
                <p class="pSemClique">o</p>
                <p class="pSemClique">p</p>
                <p class="pSemClique">q</p>
                <p class="pSemClique">r</p>
                <p class="pSemClique">s</p>
                <p class="pSemClique">t</p>
                <p class="pSemClique">u</p>
                <p class="pSemClique">v</p>
                <p class="pSemClique">w</p>
                <p class="pSemClique">x</p>
                <p class="pSemClique">y</p>
                <p class="pSemClique">z</p>
            </div>
        </div>

        <script>
            console.log(
                document.querySelector(".palavraEscondida").textContent
            );

            const palavraEscolhida =
                document.querySelector(".palavraEscondida").textContent;

            let palavraEscolhidaOriginal = [];

            for (const letra of palavraEscolhida) {
                const letraPalavra = document.createElement("p");
                letraPalavra.textContent = letra;
                letraPalavra.classList.add("hidden");
                letraPalavra.classList.add(letraPalavra.textContent);

                const bordaAbaixo = document.createElement("p");
                bordaAbaixo.classList.add("bordaAbaixo");

                document.querySelector("h2").appendChild(letraPalavra);
            }

            const alfabeto = document.querySelector(".alfabeto");
            alfabeto.addEventListener("click", (e) => {
                const element = e.target.textContent;
                console.log(element);

                if (palavraEscolhida.includes(element)) {
                    if (!palavraEscolhidaOriginal.includes(element)) {
                        for (
                            let i = 0;
                            i < document.querySelectorAll(`.${element}`).length;
                            i++
                        ) {
                            document
                                .querySelectorAll(`.${element}`)
                                [i].classList.remove("hidden");
                            document.querySelectorAll(`.${element}`)[
                                i
                            ].style.borderBottom = "none";

                            palavraEscolhidaOriginal.push(element);
                            console.log(palavraEscolhidaOriginal.sort());
                        }
                    }

                    if (
                        palavraEscolhida.length ===
                        palavraEscolhidaOriginal.length
                    ) {
                        document.querySelector("h2").textContent =
                            palavraEscolhida;
                        document.querySelector("h2").classList.add("venceu");

                        document.querySelector(".alfabeto").innerHTML =
                            " <button class='recomecar'>Recome√ßar</button>";

                        document
                            .querySelector(".alfabeto")
                            .addEventListener("click", () => {
                                location.reload();
                            });
                    }
                }
            });

            for (
                let i = 0;
                i < document.querySelectorAll(".alfabeto p").length;
                i++
            ) {
                document
                    .querySelectorAll(".alfabeto p")
                    [i].addEventListener("click", () => {
                        document
                            .querySelectorAll(".alfabeto p")
                            [i].classList.add("clicado");
                        document
                            .querySelectorAll(".alfabeto p")
                            [i].classList.remove("pSemClique");
                    });
            }
        </script>
    </body>
</html>
